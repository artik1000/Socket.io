(function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},r=[];function i(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"5ae47b1d"}[t]+".js"}function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=n[t]=[e,s]}));e.push(a[2]=s);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",l.name="ChunkLoadError",l.type=s,l.request=r,a[1](l)}n[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},"37b4":function(t,e,a){"use strict";var s=a("42f5"),n=a.n(s);n.a},"39de":function(t,e,a){var s={"./avatar1.jpeg":"c0f3","./avatar2.jpeg":"e67e","./avatar3.jpeg":"a9f8"};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id="39de"},"42f5":function(t,e,a){},"553f":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("Layout",{staticClass:"client-wripper"},[a("Sider",{staticClass:"sider1",staticStyle:{"min-width":"50px","max-width":"50px"}},[a("Avatar",{attrs:{shape:"square",src:t.avatar("self")}}),a("Icon",{staticClass:"menu",attrs:{type:"ios-menu"}})],1),a("Sider",{staticClass:"sider2",staticStyle:{"min-width":"180px","max-width":"180px"}},[a("Layout",{staticClass:"sider2-wrapper"},[a("Header",{staticClass:"header"},[a("Input",{staticClass:"input",attrs:{size:"small"}},[a("Icon",{attrs:{slot:"prefix",type:"ios-search"},slot:"prefix"})],1),a("Icon",{staticClass:"add",attrs:{type:"ios-add"}})],1),a("Content",{staticClass:"content"},[a("Menu",{staticClass:"menu",attrs:{"active-name":t.currentName,theme:"dark",width:"176px"},on:{"on-select":t.selectName}},t._l(t.person,(function(e,s){return a("MenuItem",{key:s,staticClass:"menu-item",attrs:{name:e.name}},[a("Row",{staticClass:"row"},[a("Col",{staticClass:"avatar",attrs:{span:"7"}},[a("Avatar",{staticStyle:{width:"40px",height:"40px"},attrs:{shape:"square",src:t.avatar(e.name===t.self?"file":e.avatar)}})],1),a("Col",{staticClass:"infomation",attrs:{span:"12"}},[a("div",{staticClass:"name"},[t._v(t._s(e.name===t.self?"Отправить себе":e.name))]),a("div",{staticClass:"msg"},[t._v(t._s(t.msgs[e.name]?t.msgs[e.name][t.msgs[e.name].length-1].msg:""))])]),a("Col",{staticClass:"time",attrs:{span:""}},[a("span",[t._v(t._s(t.msgs[e.name]?t.msgs[e.name][t.msgs[e.name].length-1].time:""))])])],1)],1)})),1)],1)],1)],1),a("Layout",{staticClass:"content-wrapper"},[a("Header",{staticClass:"header"},[a("span",{staticClass:"name"},[t._v(t._s(t.currentName))]),a("Icon",{staticClass:"close",attrs:{type:"ios-close"},on:{click:t.exit}})],1),a("Content",{ref:"content",staticClass:"content"},t._l(t.msgs[t.currentName],(function(e,s){return a("Row",{key:s,staticClass:"row",class:{isSelf:e.sender===t.self},attrs:{type:"flex",justify:e.sender===t.self?"end":"start"}},[a("Col",{staticClass:"avatar",attrs:{order:e.sender===t.self?2:1,span:"2"}},[a("Avatar",{staticStyle:{width:"30px",height:"30px"},attrs:{shape:"square",src:t.avatar(e.avatar)}})],1),a("Col",{staticClass:"infomation",attrs:{order:e.sender===t.self?1:2,span:"10"}},[a("div",{staticClass:"name"},[t._v(t._s(e.sender))]),a("div",{staticClass:"msg"},[a("span",{staticClass:"span"},[t._v(t._s(e.msg))])])])],1)})),1),a("Footer",{staticClass:"footer"},[a("Icon",{staticClass:"emotion",attrs:{type:"ios-happy-outline"}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sendMsg,expression:"sendMsg"}],staticClass:"textarea",attrs:{cols:"52",rows:"3"},domProps:{value:t.sendMsg},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.send(e))},input:function(e){e.target.composing||(t.sendMsg=e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"tip"},[a("div",{staticClass:"tip-inner"},[t._v("Введите сообщение")]),a("div",{staticClass:"tip-inner2"})]),a("button",{staticClass:"button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.send(e)}}},[t._v("Отправить сообщение")])],1)],1)],1)],1)},o=[],c=(a("b0c0"),a("4d90"),a("8055")),l=a.n(c);function u(){var t=new Date;return(t.getHours()+"").padStart(2,"0")+":"+(t.getMinutes()+"").padStart(2,"0")}var p={name:"Client",props:{},data:function(){return{currentName:"Общий чат",self:"",myAvatar:"avatar1",person:{"Общий чат":{avatar:"qunliao",name:"Общий чат"}},msgs:{},sendMsg:"",socket:"",visible:!1}},computed:{mySocket:function(){return this.$store.socket}},methods:{selectName:function(t){this.currentName=t;var e=this.$refs.content.$el;this.$nextTick((function(){e.scrollTop=e.scrollHeight}))},avatar:function(t){return"self"===t?a("39de")("./".concat(this.myAvatar,".jpeg")):a("e078")("./".concat(t,".png"))},send:function(){var t=this,e=u();if(console.log(e),!this.sendMsg)return this.visible=!0,void setTimeout((function(){t.visible=!1}),2e3);var a={sender:this.self,receiver:this.currentName,msg:this.sendMsg,avatar:this.myAvatar,group:!1,time:e};if("Общий чат"!==this.currentName){var s=this.$refs.content.$el;this.msgs[this.currentName]||this.$set(this.msgs,this.currentName,[]),this.msgs[this.currentName].push(a),this.$nextTick((function(){s.scrollTop=s.scrollHeight})),this.currentName!==this.self&&this.mySocket.emit("chatMessage",a),this.sendMsg=""}else a.group=!0,console.log("shiliaotianshi"),this.mySocket.emit("chatMessage",a),this.sendMsg=""},exit:function(){this.$router.push({path:"/login"}),this.$router.go(0)}},beforeCreate:function(){this.$route.params.name||this.$router.push({path:"/login",name:"Login"})},mounted:function(){var t=this;this.self=this.$route.params.name,this.myAvatar=this.$route.params.avatar;var e=this.$refs.content.$el;this.$nextTick((function(){e.scrollTop=e.scrollHeight})),this.mySocket.on("msg",(function(a){var s="";console.log(a),s=a.group?a.receiver:a.sender,t.msgs[s]||t.$set(t.msgs,s,[]),t.msgs[s].push(a),t.$nextTick((function(){e.scrollTop=e.scrollHeight}))})),this.mySocket.on("userlist",(function(e){console.log("list",e),t.person=e})),this.mySocket.emit("getUserlist")}},f=p,m=(a("a55a"),a("2877")),v=Object(m["a"])(f,i,o,!1,null,null,null),d=v.exports,h={components:{Client:d}},g=h,y=(a("7faf"),Object(m["a"])(g,n,r,!1,null,null,null)),C=y.exports,b=(a("d3b7"),a("8c4f")),w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},x=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("img",{attrs:{alt:"Vue logo",src:a("cf05")}})])}],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"})},_=[],N={name:"HelloWorld",props:{msg:String}},$=N,j=(a("37b4"),Object(m["a"])($,k,_,!1,null,"6919ad01",null)),S=j.exports,O={name:"Home",components:{HelloWorld:S}},M=O,T=Object(m["a"])(M,w,x,!1,null,null,null),E=(T.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("div",{staticClass:"login-wripper"},[a("div",{staticClass:"title"},[t._v("Выберите Аватар")]),a("div",{staticClass:"inner"},[a("Icon",{staticClass:"left",attrs:{type:"md-arrow-round-back"},on:{click:t.left}}),a("Avatar",{staticClass:"avatar",attrs:{shape:"square",size:"large",src:t.myAvatar}}),a("Icon",{staticClass:"right",attrs:{type:"md-arrow-round-forward"},on:{click:t.right}}),a("Modal",{attrs:{title:"Error",styles:{top:"80px",width:"200px"}},model:{value:t.errDisplay,callback:function(e){t.errDisplay=e},expression:"errDisplay"}},[a("p",[t._v("Ошибка")])]),a("Input",{staticClass:"input",attrs:{size:"large",placeholder:"Введите логин"},on:{"on-enter":t.login},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"tip"},[a("div",{staticClass:"tip-inner"},[t._v("Введите логин!")]),a("div",{staticClass:"tip-inner2"})]),a("Button",{staticClass:"button",attrs:{type:"success"},on:{click:t.login}},[t._v("Login")])],1)])])}),A=[],D={name:"Login",data:function(){return{name:"",avatar:["avatar1","avatar2","avatar3"],avatarNum:0,visible:!1,errDisplay:!1}},computed:{myAvatar:function(){return a("39de")("./".concat(this.avatar[this.avatarNum],".jpeg"))},mySocket:function(){return this.$store.socket}},methods:{login:function(){var t=this;if(!this.name)return this.visible=!0,void setTimeout((function(){t.visible=!1}),2e3);this.mySocket.emit("login",{name:this.name,avatar:this.avatar[this.avatarNum]}),this.mySocket.on("loginStatus",(function(e){e?t.$router.push({path:"/chat",name:"Chat",params:{name:t.name,avatar:t.avatar[t.avatarNum]}}):t.errDisplay=!0}))},left:function(){this.avatarNum?this.avatarNum=this.avatarNum-1:this.avatarNum=14},right:function(){14===this.avatarNum?this.avatarNum=0:this.avatarNum=this.avatarNum+1}},mounted:function(){this.$store.socket=l()("/")}},L=D,P=(a("bf2d"),Object(m["a"])(L,E,A,!1,null,null,null)),H=P.exports;s["default"].use(b["a"]);var I=b["a"].prototype.push;b["a"].prototype.push=function(t){return I.call(this,t).catch((function(t){return t}))};var q=[{path:"/",name:"Login",component:H},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/chat",name:"Chat",component:d},{path:"/login",name:"Login",component:H}],U=new b["a"]({mode:"hash",base:"/",routes:q}),z=U,F=a("e069"),J=a.n(F),R=(a("dcad"),a("2f62"));s["default"].use(J.a),s["default"].use(R["a"]),s["default"].config.productionTip=!1;var W=new R["a"].Store({state:{socket:""},mutations:{connect:function(t,e){t.socket=e}}});new s["default"]({router:z,store:W,render:function(t){return t(C)}}).$mount("#app")},"73d4":function(t,e,a){},"7faf":function(t,e,a){"use strict";var s=a("b8ff"),n=a.n(s);n.a},a55a:function(t,e,a){"use strict";var s=a("73d4"),n=a.n(s);n.a},a9f8:function(t,e,a){t.exports=a.p+"img/avatar3.4a9ff192.jpeg"},b766:function(t,e,a){t.exports=a.p+"img/qunliao.13269741.png"},b8ff:function(t,e,a){},bf2d:function(t,e,a){"use strict";var s=a("553f"),n=a.n(s);n.a},c0f3:function(t,e,a){t.exports=a.p+"img/avatar1.80bc06a2.jpeg"},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},e078:function(t,e,a){var s={"./emotion.png":"f837","./qunliao.png":"b766"};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id="e078"},e67e:function(t,e,a){t.exports=a.p+"img/avatar2.92693a35.jpeg"},f837:function(t,e,a){t.exports=a.p+"img/emotion.da5c538a.png"}});
//# sourceMappingURL=app.ed508346.js.map